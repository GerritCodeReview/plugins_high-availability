{
  "comments": [
    {
      "key": {
        "uuid": "20341352_7756f80a",
        "filename": "src/main/java/com/ericsson/gerrit/plugins/highavailability/peers/jgroups/InetAddressFinder.java",
        "patchSetId": 25
      },
      "lineNbr": 56,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2017-09-01T14:04:08Z",
      "side": 1,
      "message": "RFC: I extracted this whole class from the JGroupsPeerInfoProvider with the intention to make\ntesting of this code easier. However, NetworkInterface is a final class and cannot be mocked using Mockito. Any idea how to test this method?",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 56,
        "endChar": 93
      },
      "revId": "75b54327c4149bd6e19b14ba1cef7a623bd2e835",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8761fda6_eee0d2b6",
        "filename": "src/main/java/com/ericsson/gerrit/plugins/highavailability/peers/jgroups/InetAddressFinder.java",
        "patchSetId": 25
      },
      "lineNbr": 56,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2017-09-01T22:04:44Z",
      "side": 1,
      "message": "it seems Mockito 2.1.0 can mock final classes [1]\n\n[1] http://static.javadoc.io/org.mockito/mockito-core/2.9.0/org/mockito/Mockito.html#39\nhttps://www.voxxed.com/2016/10/mockito-2-1-0/",
      "parentUuid": "20341352_7756f80a",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 56,
        "endChar": 93
      },
      "revId": "75b54327c4149bd6e19b14ba1cef7a623bd2e835",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8261bae4_bd3735da",
        "filename": "src/main/java/com/ericsson/gerrit/plugins/highavailability/peers/jgroups/InetAddressFinder.java",
        "patchSetId": 25
      },
      "lineNbr": 56,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-09-04T05:01:54Z",
      "side": 1,
      "message": "Instead of mocking the NetworkInterface class, wrap the call to it in a utility method and mock that instead?",
      "parentUuid": "8761fda6_eee0d2b6",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 56,
        "endChar": 93
      },
      "revId": "75b54327c4149bd6e19b14ba1cef7a623bd2e835",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec7634aa_1a7528b7",
        "filename": "src/main/java/com/ericsson/gerrit/plugins/highavailability/peers/jgroups/InetAddressFinder.java",
        "patchSetId": 25
      },
      "lineNbr": 56,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-09-04T05:16:11Z",
      "side": 1,
      "message": "Hmm, maybe that doesn\u0027t work either, since NetworkInterface doesn\u0027t have a public constructor.",
      "parentUuid": "8261bae4_bd3735da",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 56,
        "endChar": 93
      },
      "revId": "75b54327c4149bd6e19b14ba1cef7a623bd2e835",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "accbcc48_8acc3c7f",
        "filename": "src/main/java/com/ericsson/gerrit/plugins/highavailability/peers/jgroups/InetAddressFinder.java",
        "patchSetId": 25
      },
      "lineNbr": 56,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2017-09-04T08:43:46Z",
      "side": 1,
      "message": "\u003e it seems Mockito 2.1.0 can mock final classes [1]\n\nActually, in stable-2.13 we already use mockito 2.7.21, see [2].\nLooks like I need to opt-in for this feature as documented in [3]\n\n[2] https://gerrit.googlesource.com/plugins/high-availability/+/stable-2.13/BUCK#59\n[3] https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2#mock-the-unmockable-opt-in-mocking-of-final-classesmethods",
      "parentUuid": "ec7634aa_1a7528b7",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 56,
        "endChar": 93
      },
      "revId": "75b54327c4149bd6e19b14ba1cef7a623bd2e835",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c59a484_7aff463f",
        "filename": "src/main/java/com/ericsson/gerrit/plugins/highavailability/peers/jgroups/InetAddressFinder.java",
        "patchSetId": 25
      },
      "lineNbr": 56,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2017-09-04T11:47:22Z",
      "side": 1,
      "message": "Tried to opt-in as described in [3] but it didn\u0027t work.\nUpgraded mockito to the latest version (2.9.0), still didn\u0027t work.\nTried additionally upgrading bytebuddy to 1.7.0 and also 1.7.5 but it didn\u0027t fix the problem.\n\nThe latest error (with both mockito and bytebuddy upgraded to their latest version) is:\n\n  java.lang.ClassNotFoundException: net.bytebuddy.agent.ByteBuddyAgent\n\nHowever, when I check the downloaded byte-buddy-\u003cversion\u003e.jar it really doesn\u0027t contain a class\nnamed ByteBuddyAgent.\n\nWhat it suspicious is that several lines above I see this message:\n\n  Could not initialize inline Byte Buddy mock maker. (This mock maker is not supported on Android.)\n\nAny idea why mockito thinks it is running on Android?",
      "parentUuid": "accbcc48_8acc3c7f",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 56,
        "endChar": 93
      },
      "revId": "75b54327c4149bd6e19b14ba1cef7a623bd2e835",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d3ebe65_9782f3bc",
        "filename": "src/main/java/com/ericsson/gerrit/plugins/highavailability/peers/jgroups/InetAddressFinder.java",
        "patchSetId": 25
      },
      "lineNbr": 56,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2017-09-04T12:18:04Z",
      "side": 1,
      "message": "I think that\u0027s determined here\nhttps://github.com/mockito/mockito/blob/release/2.x/src/main/java/org/mockito/internal/util/Platform.java",
      "parentUuid": "9c59a484_7aff463f",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 56,
        "endChar": 93
      },
      "revId": "75b54327c4149bd6e19b14ba1cef7a623bd2e835",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}