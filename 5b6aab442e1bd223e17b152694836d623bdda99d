{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c6740800_ca0de3dc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2023-10-12T12:05:24Z",
      "side": 1,
      "message": "Apparently this is not enough, there are 2 more tests that fail with the StackOverflowError:\n`indexLocksShouldBlockConcurrentIndexChange` and `indexLocksShouldBlockConcurrentIndexAndDeleteChange`",
      "revId": "5b6aab442e1bd223e17b152694836d623bdda99d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a834650_8781f313",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2023-10-12T12:46:30Z",
      "side": 1,
      "message": "Wrong observation, these two tests do not produce StackOverflowError but an assertion failed. Seems like these two tests are also flaky.",
      "parentUuid": "c6740800_ca0de3dc",
      "revId": "5b6aab442e1bd223e17b152694836d623bdda99d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b0319d8e_4b1de684",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2023-10-12T12:05:24Z",
      "side": 1,
      "message": "Posting here a StackOverflowError for reference:\n```\nERROR com.google.gerrit.pgm.Daemon : Thread EXECUTOR_THREAD threw exception\njava.lang.StackOverflowError\n\tat java.base/java.lang.StackStreamFactory$AbstractStackWalker.callStackWalk(Native Method)\n\tat java.base/java.lang.StackStreamFactory$AbstractStackWalker.beginStackWalk(StackStreamFactory.java:370)\n\tat java.base/java.lang.StackStreamFactory$AbstractStackWalker.walk(StackStreamFactory.java:243)\n\tat java.base/java.lang.StackWalker.walk(StackWalker.java:498)\n\tat com.google.common.flogger.util.StackWalkerStackGetter.callerOf(StackWalkerStackGetter.java:38)\n\tat com.google.common.flogger.util.CallerFinder.findCallerOf(CallerFinder.java:86)\n\tat com.google.common.flogger.backend.system.StackBasedCallerFinder.findLogSite(StackBasedCallerFinder.java:54)\n\tat com.google.common.flogger.LogContext.shouldLog(LogContext.java:585)\n\tat com.google.common.flogger.LogContext.log(LogContext.java:792)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:46)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:43)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.run(IndexEventHandler.java:169)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest$CurrentThreadScheduledExecutorService.schedule(IndexEventHandlerTest.java:768)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler$IndexTask.reschedule(IndexEventHandler.java:181)\n\tat com.ericsson.gerrit.plugins.highavailability.index.IndexEventLocks.withLock(IndexEventLocks.java:69)\n\tat jdk.internal.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\t...\n\n```",
      "revId": "5b6aab442e1bd223e17b152694836d623bdda99d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}